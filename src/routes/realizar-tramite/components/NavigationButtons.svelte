<script lang="ts">
	import { createEventDispatcher } from 'svelte';

	export let currentStep: number;
	export let totalSteps: number = 4;
	export let isSubmitting: boolean = false;

	const dispatch = createEventDispatcher<{
		next: void;
		previous: void;
		submit: void;
	}>();

	function handleNext() {
		dispatch('next');
	}

	function handlePrevious() {
		dispatch('previous');
	}

	function handleSubmit() {
		dispatch('submit');
	}
</script>

<div class="flex justify-between pt-8 border-t border-gray-100">
	<!-- Previous Button -->
	{#if currentStep > 1}
		<button
			type="button"
			on:click={handlePrevious}
			class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"
		>
			<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
			</svg>
			Anterior
		</button>
	{:else}
		<div></div>
	{/if}

	<!-- Next/Submit Button -->
	{#if currentStep < totalSteps}
		<button
			type="button"
			on:click={handleNext}
			class="inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"
		>
			Siguiente
			<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
			</svg>
		</button>
	{:else}
		<button
			type="submit"
			on:click={handleSubmit}
			disabled={isSubmitting}
			class="inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"
		>
			{#if isSubmitting}
				<svg class="w-4 h-4 mr-2 animate-spin" fill="none" viewBox="0 0 24 24">
					<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
					<path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
				</svg>
				Procesando...
			{:else}
				<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
				</svg>
				Confirmar Tr√°mite
			{/if}
		</button>
	{/if}
</div>
